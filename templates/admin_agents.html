{% extends "base.html" %}
{% block content %}

<h2>Administration des agents</h2>

<h3>Cr√©er un agent</h3>

<form method="POST" action="/admin/agents/create" class="form">

<input name="nom" placeholder="Nom" required>
<input name="prenom" placeholder="Pr√©nom" required>

<input type="date" name="naissance" required>

<select name="role">
    <option value="Plongeur">Plongeur</option>
    <option value="SAS">SAS</option>
    <option value="Admin">Admin</option>
</select>

<button>Cr√©er agent</button>

<p style="font-size:12px;color:#666;margin-top:10px">
Login g√©n√©r√© automatiquement : premi√®re lettre du pr√©nom + nom<br>
Mot de passe √† d√©finir lors de la premi√®re connexion.
</p>

</form>

<hr>

<h3>Liste des agents</h3>

<table>

<tr>
<th>Nom</th>
<th>Pr√©nom</th>
<th>Naissance</th>
<th>Profil</th>
<th>Login</th>
<th>√âtat</th>
<th>Actions</th>
</tr>

{% for a in agents %}
<tr>
<td>{{ a.nom }}</td>
<td>{{ a.prenom }}</td>
<td>{{ a.naissance }}</td>
<td>{{ a.role }}</td>
<td>{{ a.login }}</td>

<td>
{% if a.password == None %}
<span style="color:red">√Ä activer</span>
{% else %}
Actif
{% endif %}
</td>

<td>

<form method="POST"
      action="/admin/agents/delete/{{ a.login }}"
      onsubmit="return confirm('Supprimer d√©finitivement {{ a.prenom }} {{ a.nom }} ?');"
      style="display:inline">

<button style="background:#c62828;color:white">
üóë Supprimer
</button>

</form>

</td>

</tr>
{% endfor %}

</table>

{% endblock %}
